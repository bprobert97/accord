@startuml
participant "Application and Data Processing Layers" as ADPL
queue "Transaction Listener and Queue" as Queue
participant "Consensus and Validation Layer" as DLT

activate DLT
activate ADPL

ADPL-> ADPL: process_measurement(observation_data)

ADPL-->> ADPL: Create new transaction

' Submission is now asynchronous via Listener and Queue
ADPL-> Queue: submit_transaction(new_transaction)
Queue-> Queue: Enqueue(new_transaction)
Queue-->> ADPL: submission_received
deactivate ADPL

' In a separate process, the DLT core pulls from the queue
DLT -> Queue: Dequeue()
Queue -> DLT: process_transaction

note left of DLT: This layer processes transactions from the queue,\nvalidates them using the PoISE consensus mechanism,\nadds them to the DLT, and updates reputation scores.

DLT -> DLT: Validate transaction using PoISE

alt validation_result is approved
    DLT -> DLT: Confirm transaction
    DLT -> DLT: update_reputation_positive()
else validation_result is rejected
    DLT -> DLT: Reject transaction
    DLT -> DLT: update_reputation_negative()
end

DLT -->> ADPL: Update submission_status
DLT -->> ADPL: Synchronise DLT
deactivate DLT
@enduml